<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Reportes
    </ion-title>
    
  </ion-toolbar>
</ion-header>

<ion-content>
  <main class="sales-app" color="primary">
    <!-- Main Content -->
        <div class="sales-main-content">
            <!-- Quick Stats -->
            <div class="sales-quick-stats">
                <!-- Tarjeta Ventas Hoy -->
                <div class="sales-stat-card">
                    <ng-container *ngIf="today_sales; else loadingSales">
                    <p class="sales-stat-label">Ventas Hoy</p>
                    <p class="sales-stat-value">$ {{today_sales.valor_ventas}}</p>
                    <p 
                        class="sales-stat-change"
                        [ngClass]="today_sales.porcentaje >= 0 ? 'positive' : 'negative'">
                        {{ today_sales.porcentaje >= 0 ? '+' : '' }}{{ today_sales.porcentaje }}%
                    </p>
                    </ng-container>
                    <ng-template #loadingSales>
                        <ion-spinner name="crescent"></ion-spinner>
                    </ng-template>
                </div>

                <!-- Tarjeta Productos Vendidos -->
                <div class="sales-stat-card">
                    <ng-container *ngIf="today_products; else loadingProducts">
                    <p class="sales-stat-label">Productos Vendidos</p>
                    <p class="sales-stat-value">156</p>
                    <p 
                        class="sales-stat-change"
                        [ngClass]="today_products.porcentaje >= 0 ? 'positive' : 'negative'">
                        {{ today_products.porcentaje >= 0 ? '+' : '' }}{{ today_products.porcentaje }}%
                    </p>
                    </ng-container>
                    <ng-template #loadingProducts>
                        <ion-spinner name="crescent"></ion-spinner>
                    </ng-template>
                </div>
            </div>

            <!-- Main Menu -->
            <div class="sales-section-header">
                <span class="sales-icon-chart"></span>
                <span>Opciones de Reportes</span>
            </div>

            <div class="sales-menu-items">
                <div class="sales-menu-card" (click)="mostrar_lista_ventas()">
                    <div class="sales-menu-card-content">
                        <div class="sales-menu-icon blue">
                            <span class="sales-icon-cart"></span>
                        </div>
                        <div class="sales-menu-info">
                            <div class="sales-menu-title-row">
                                <h3 class="sales-menu-title">Lista de Ventas</h3>
                                <span class="sales-badge">Básico</span>
                            </div>
                            <p class="sales-menu-description">Ver ventas realizadas por fecha con productos y totales</p>
                        </div>
                        <span class="sales-menu-arrow sales-icon-arrow"></span>
                    </div>
                </div>

                <div class="sales-menu-card" (click)='mostrar_dashboard_ventas()'>
                    <div class="sales-menu-card-content">
                        <div class="sales-menu-icon green">
                            <span class="sales-icon-trend"></span>
                        </div>
                        <div class="sales-menu-info">
                            <div class="sales-menu-title-row">
                                <h3 class="sales-menu-title">Análisis de Ventas</h3>
                                <span class="sales-badge">Agregados</span>
                            </div>
                            <p class="sales-menu-description">Totales por día, producto o categoría para identificar tendencias</p>
                        </div>
                        <span class="sales-menu-arrow sales-icon-arrow"></span>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="sales-quick-actions">
                <div class="sales-section-header">
                    <span class="sales-icon-calendar"></span>
                    <span>Acciones Rápidas</span>
                </div>

                <div class="sales-action-buttons">
                    <button class="sales-action-btn">
                        <span class="sales-action-btn-icon sales-icon-calendar"></span>
                        <span class="sales-action-btn-text">Ventas de Hoy</span>
                    </button>
                    <button class="sales-action-btn">
                        <span class="sales-action-btn-icon sales-icon-package"></span>
                        <span class="sales-action-btn-text">Top Productos</span>
                    </button>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="sales-activity-card">
                <div class="sales-activity-header">
                    <h3 class="sales-activity-title">Actividad Reciente</h3>
                    <p class="sales-activity-subtitle">Últimas ventas registradas</p>
                </div>
                <div class="sales-activity-content">
                    <ng-container *ngIf="lastThreeProducts; else loadingRecent">
                    <div class="sales-activity-item" *ngFor="let product of lastThreeProducts">
                        <div class="sales-activity-info">
                        <h4>{{ product.nombre }}</h4>
                        <p>{{ product.tiempo }}</p>
                        </div>
                        <div class="sales-activity-amount">${{ product.ganancia }}</div>
                    </div>
                    </ng-container>
                    <ng-template #loadingRecent>
                    <div class="sales-activity-spinner">
                        <ion-spinner name="crescent"></ion-spinner>
                    </div>
                    </ng-template>
                </div>
            </div>
            <!-- Bottom Spacer -->
            <div class="sales-bottom-spacer"></div>
      </div>
  </main>
</ion-content>
